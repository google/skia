load("@rules_python//python:defs.bzl", "py_binary")
load("@py_deps//:requirements.bzl", "requirement")

# This file will be copied into //third_party/externals/dawn via the new_local_repository
# rule in WORKSPACE.bazel, so all files should be relative to that path.

# We define this here because the emscripten toolchain calls the cpu wasm, whereas the
# bazelbuild/platforms call it wasm32. https://github.com/emscripten-core/emsdk/issues/919
config_setting(
    name = "cpu_wasm",
    values = {
        "cpu": "wasm",
    },
)

py_binary(
    name = "dawn_json_generator",
    srcs = [
        "generator/dawn_json_generator.py",
        "generator/generator_lib.py",
    ],
    deps = [
        requirement("jinja2"),
        # jinja2 has a dep on MarkupSafe. Declaring MarkupSafe here is not necessary, but it makes
        # the link easier to find than searching the Bazel cache for generated deps.
        requirement("MarkupSafe"),
    ],
)

genrule(
    name = "generate_webgpu_cpp",
    srcs = [
        "generator/templates/api_cpp.h",
        "generator/templates/api_cpp_chained_struct.h",
        "generator/templates/api_cpp_print.h",
        "generator/templates/BSD_LICENSE",
        "dawn.json",
        "dawn_wire.json",
    ],
    outs = [
        "include/dawn/webgpu_cpp.h",
        "include/dawn/webgpu_cpp_chained_struct.h",
        "include/dawn/webgpu_cpp_print.h",
    ],
    cmd = "$(location :dawn_json_generator) " +
          "--dawn-json $(location dawn.json) " +
          "--wire-json $(location dawn_wire.json) " +
          "--template-dir $$(dirname $(location generator/templates/api_cpp.h)) " +
          "--targets cpp_headers " +
          "--output-dir $(RULEDIR)",
    exec_tools = [":dawn_json_generator"],
)

genrule(
    name = "generate_webgpu",
    srcs = [
        "generator/templates/api.h",
        "generator/templates/dawn_proc_table.h",
        "generator/templates/BSD_LICENSE",
        "dawn.json",
        "dawn_wire.json",
    ],
    outs = [
        "include/dawn/webgpu.h",
        "include/dawn/dawn_proc_table.h",
    ],
    cmd = "$(location :dawn_json_generator) " +
          "--dawn-json $(location dawn.json) " +
          "--wire-json $(location dawn_wire.json) " +
          "--template-dir $$(dirname $(location generator/templates/api.h)) " +
          "--targets headers " +
          "--output-dir $(RULEDIR)",
    exec_tools = [":dawn_json_generator"],
)

genrule(
    name = "generate_proc",
    srcs = [
        "dawn.json",
        "dawn_wire.json",
        "generator/templates/BSD_LICENSE",
        "generator/templates/dawn_proc.c",
        "generator/templates/dawn_thread_dispatch_proc.cpp",
    ],
    outs = [
        "src/dawn/dawn_proc.c",
        "src/dawn/dawn_thread_dispatch_proc.cpp",
    ],
    cmd = "$(location :dawn_json_generator) " +
          "--dawn-json $(location dawn.json) " +
          "--wire-json $(location dawn_wire.json) " +
          "--template-dir $$(dirname $(location generator/templates/BSD_LICENSE)) " +
          "--targets proc " +
          "--output-dir $(RULEDIR)",
    exec_tools = [":dawn_json_generator"],
)

genrule(
    name = "generate_dawn_cpp",
    srcs = [
        "dawn.json",
        "dawn_wire.json",
        "generator/templates/BSD_LICENSE",
        "generator/templates/api_cpp.cpp",
    ],
    outs = [
        "src/dawn/webgpu_cpp.cpp",
    ],
    cmd = "$(location :dawn_json_generator) " +
          "--dawn-json $(location dawn.json) " +
          "--wire-json $(location dawn_wire.json) " +
          "--template-dir $$(dirname $(location generator/templates/BSD_LICENSE)) " +
          "--targets cpp " +
          "--output-dir $(RULEDIR)",
    exec_tools = [":dawn_json_generator"],
)

genrule(
    name = "generate_utils",
    srcs = [
        "dawn.json",
        "dawn_wire.json",
        "generator/templates/BSD_LICENSE",
        "generator/templates/dawn/native/ChainUtils.cpp",
        "generator/templates/dawn/native/ChainUtils.h",
        "generator/templates/dawn/native/ObjectType.cpp",
        "generator/templates/dawn/native/ObjectType.h",
        "generator/templates/dawn/native/ProcTable.cpp",
        "generator/templates/dawn/native/ValidationUtils.cpp",
        "generator/templates/dawn/native/ValidationUtils.h",
        "generator/templates/dawn/native/api_StreamImpl.cpp",
        "generator/templates/dawn/native/api_absl_format.cpp",
        "generator/templates/dawn/native/api_absl_format.h",
        "generator/templates/dawn/native/api_structs.cpp",
        "generator/templates/dawn/native/api_structs.h",
        "generator/templates/dawn/native/dawn_platform.h",
    ],
    outs = [
        "src/dawn/native/ChainUtils_autogen.cpp",
        "src/dawn/native/ChainUtils_autogen.h",
        "src/dawn/native/ObjectType_autogen.cpp",
        "src/dawn/native/ObjectType_autogen.h",
        "src/dawn/native/ProcTable.cpp",
        "src/dawn/native/ValidationUtils_autogen.cpp",
        "src/dawn/native/ValidationUtils_autogen.h",
        "src/dawn/native/dawn_platform_autogen.h",
        "src/dawn/native/webgpu_StreamImpl_autogen.cpp",
        "src/dawn/native/webgpu_absl_format_autogen.cpp",
        "src/dawn/native/webgpu_absl_format_autogen.h",
        "src/dawn/native/wgpu_structs_autogen.cpp",
        "src/dawn/native/wgpu_structs_autogen.h",
    ],
    cmd = "$(location :dawn_json_generator) " +
          "--dawn-json $(location dawn.json) " +
          "--wire-json $(location dawn_wire.json) " +
          "--template-dir $$(dirname $(location generator/templates/BSD_LICENSE)) " +
          "--targets native_utils " +
          "--output-dir $(RULEDIR)",
    exec_tools = [":dawn_json_generator"],
)

py_binary(
    name = "dawn_gpu_info_generator",
    srcs = [
        "generator/dawn_gpu_info_generator.py",
        "generator/generator_lib.py",
    ],
    deps = [
        requirement("jinja2"),
        # jinja2 has a dep on MarkupSafe. Declaring MarkupSafe here is not necessary, but it makes
        # the link easier to find than searching the Bazel cache for generated deps.
        requirement("MarkupSafe"),
    ],
)

genrule(
    name = "generate_gpuinfo",
    srcs = [
        "src/dawn/gpu_info.json",
        "generator/templates/BSD_LICENSE",
        "generator/templates/dawn/common/GPUInfo.h",
        "generator/templates/dawn/common/GPUInfo.cpp",
    ],
    outs = [
        "src/dawn/common/GPUInfo_autogen.h",
        "src/dawn/common/GPUInfo_autogen.cpp",
    ],
    cmd = "$(location :dawn_gpu_info_generator) " +
          "--gpu-info-json $(location src/dawn/gpu_info.json) " +
          "--template-dir $$(dirname $(location generator/templates/BSD_LICENSE)) " +
          "--output-dir $(RULEDIR)",
    exec_tools = [":dawn_gpu_info_generator"],
)

py_binary(
    name = "dawn_version_generator",
    srcs = [
        "generator/dawn_version_generator.py",
        "generator/generator_lib.py",
    ],
    deps = [
        requirement("jinja2"),
        # jinja2 has a dep on MarkupSafe. Declaring MarkupSafe here is not necessary, but it makes
        # the link easier to find than searching the Bazel cache for generated deps.
        requirement("MarkupSafe"),
    ],
)

# This currently has a blank version, which "disables caching" according to
# https://dawn.googlesource.com/dawn/+/bd30d9e594226e96c07ec3cd46dbdc68928aef41/generator/dawn_version_generator.py#39
# We don't anticipate that being a real issue. Should we need to make this work,
# the easiest way is to use cat to read in .git/HEAD and specify that directly
# to the dawn_version_generator script (which needs a patch to accept that argument.
genrule(
    name = "generate_version",
    srcs = [
        "generator/templates/BSD_LICENSE",
        "generator/templates/dawn/common/Version.h",
    ],
    outs = [
        "src/dawn/common/Version_autogen.h",
    ],
    cmd = "$(location :dawn_version_generator) " +
          "--template-dir $$(dirname $(location generator/templates/BSD_LICENSE)) " +
          "--dawn-dir $$(dirname $(location generator/templates/BSD_LICENSE)) " +
          "--output-dir $(RULEDIR) 2> /dev/null",
    exec_tools = [":dawn_version_generator"],
)

DAWN_HDRS = [
    "include/dawn/EnumClassBitmasks.h",
    "include/dawn/dawn_proc.h",
    "include/dawn/dawn_thread_dispatch_proc.h",
    "include/dawn/native/D3D12Backend.h",
    "include/dawn/native/DawnNative.h",
    "include/dawn/native/MetalBackend.h",
    "include/dawn/native/NullBackend.h",
    "include/dawn/native/OpenGLBackend.h",
    "include/dawn/native/VulkanBackend.h",
    "include/dawn/native/dawn_native_export.h",
    "include/dawn/platform/DawnPlatform.h",
    "include/dawn/platform/dawn_platform_export.h",
    "include/dawn/wire/Wire.h",
    "include/dawn/wire/WireClient.h",
    "include/dawn/wire/WireServer.h",
    "include/dawn/wire/dawn_wire_export.h",
    "include/webgpu/webgpu.h",
    "include/webgpu/webgpu_cpp.h",
]

DAWN_SRCS = [
    # Generated files
    "include/dawn/dawn_proc_table.h",
    "include/dawn/webgpu.h",
    "include/dawn/webgpu_cpp.h",
    "include/dawn/webgpu_cpp_chained_struct.h",
    # From dawn/src/dawn/native/BUILD.gn:sources
    "src/dawn/native/DawnNative.cpp",
    "src/dawn/native/Adapter.cpp",
    "src/dawn/native/Adapter.h",
    "src/dawn/native/ApplyClearColorValueWithDrawHelper.cpp",
    "src/dawn/native/ApplyClearColorValueWithDrawHelper.h",
    "src/dawn/native/AsyncTask.cpp",
    "src/dawn/native/AsyncTask.h",
    "src/dawn/native/AttachmentState.cpp",
    "src/dawn/native/AttachmentState.h",
    "src/dawn/native/BackendConnection.cpp",
    "src/dawn/native/BackendConnection.h",
    "src/dawn/native/BindGroup.cpp",
    "src/dawn/native/BindGroup.h",
    "src/dawn/native/BindGroupLayout.cpp",
    "src/dawn/native/BindGroupLayout.h",
    "src/dawn/native/BindGroupTracker.h",
    "src/dawn/native/BindingInfo.cpp",
    "src/dawn/native/BindingInfo.h",
    "src/dawn/native/BlitBufferToDepthStencil.cpp",
    "src/dawn/native/BlitBufferToDepthStencil.h",
    "src/dawn/native/BlitColorToColorWithDraw.cpp",
    "src/dawn/native/BlitColorToColorWithDraw.h",
    "src/dawn/native/BlitDepthToDepth.cpp",
    "src/dawn/native/BlitDepthToDepth.h",
    "src/dawn/native/BlitTextureToBuffer.cpp",
    "src/dawn/native/BlitTextureToBuffer.h",
    "src/dawn/native/Blob.cpp",
    "src/dawn/native/Blob.h",
    "src/dawn/native/BlobCache.cpp",
    "src/dawn/native/BlobCache.h",
    "src/dawn/native/BuddyAllocator.cpp",
    "src/dawn/native/BuddyAllocator.h",
    "src/dawn/native/BuddyMemoryAllocator.cpp",
    "src/dawn/native/BuddyMemoryAllocator.h",
    "src/dawn/native/Buffer.cpp",
    "src/dawn/native/Buffer.h",
    "src/dawn/native/CacheKey.cpp",
    "src/dawn/native/CacheKey.h",
    "src/dawn/native/CacheRequest.cpp",
    "src/dawn/native/CacheRequest.h",
    "src/dawn/native/CacheResult.h",
    "src/dawn/native/CachedObject.cpp",
    "src/dawn/native/CachedObject.h",
    "src/dawn/native/CallbackTaskManager.cpp",
    "src/dawn/native/CallbackTaskManager.h",
    "src/dawn/native/ChainUtils.h",
    "src/dawn/native/CommandAllocator.cpp",
    "src/dawn/native/CommandAllocator.h",
    "src/dawn/native/CommandBuffer.cpp",
    "src/dawn/native/CommandBuffer.h",
    "src/dawn/native/CommandBufferStateTracker.cpp",
    "src/dawn/native/CommandBufferStateTracker.h",
    "src/dawn/native/CommandEncoder.cpp",
    "src/dawn/native/CommandEncoder.h",
    "src/dawn/native/CommandValidation.cpp",
    "src/dawn/native/CommandValidation.h",
    "src/dawn/native/Commands.cpp",
    "src/dawn/native/Commands.h",
    "src/dawn/native/CompilationMessages.cpp",
    "src/dawn/native/CompilationMessages.h",
    "src/dawn/native/ComputePassEncoder.cpp",
    "src/dawn/native/ComputePassEncoder.h",
    "src/dawn/native/ComputePipeline.cpp",
    "src/dawn/native/ComputePipeline.h",
    "src/dawn/native/CopyTextureForBrowserHelper.cpp",
    "src/dawn/native/CopyTextureForBrowserHelper.h",
    "src/dawn/native/CreatePipelineAsyncTask.cpp",
    "src/dawn/native/CreatePipelineAsyncTask.h",
    "src/dawn/native/Device.cpp",
    "src/dawn/native/Device.h",
    "src/dawn/native/DynamicUploader.cpp",
    "src/dawn/native/DynamicUploader.h",
    "src/dawn/native/EncodingContext.cpp",
    "src/dawn/native/EncodingContext.h",
    "src/dawn/native/EnumClassBitmasks.h",
    "src/dawn/native/EnumMaskIterator.h",
    "src/dawn/native/Error.cpp",
    "src/dawn/native/Error.h",
    "src/dawn/native/ErrorData.cpp",
    "src/dawn/native/ErrorData.h",
    "src/dawn/native/ErrorInjector.cpp",
    "src/dawn/native/ErrorInjector.h",
    "src/dawn/native/ErrorScope.cpp",
    "src/dawn/native/ErrorScope.h",
    "src/dawn/native/ExternalTexture.cpp",
    "src/dawn/native/ExternalTexture.h",
    "src/dawn/native/Features.cpp",
    "src/dawn/native/Features.h",
    "src/dawn/native/Format.cpp",
    "src/dawn/native/Format.h",
    "src/dawn/native/Forward.h",
    "src/dawn/native/IndirectDrawMetadata.cpp",
    "src/dawn/native/IndirectDrawMetadata.h",
    "src/dawn/native/IndirectDrawValidationEncoder.cpp",
    "src/dawn/native/IndirectDrawValidationEncoder.h",
    "src/dawn/native/Instance.cpp",
    "src/dawn/native/Instance.h",
    "src/dawn/native/IntegerTypes.h",
    "src/dawn/native/InternalPipelineStore.cpp",
    "src/dawn/native/InternalPipelineStore.h",
    "src/dawn/native/Limits.cpp",
    "src/dawn/native/Limits.h",
    "src/dawn/native/ObjectBase.cpp",
    "src/dawn/native/ObjectBase.h",
    "src/dawn/native/ObjectContentHasher.cpp",
    "src/dawn/native/ObjectContentHasher.h",
    "src/dawn/native/PassResourceUsage.cpp",
    "src/dawn/native/PassResourceUsage.h",
    "src/dawn/native/PassResourceUsageTracker.cpp",
    "src/dawn/native/PassResourceUsageTracker.h",
    "src/dawn/native/PerStage.cpp",
    "src/dawn/native/PerStage.h",
    "src/dawn/native/PhysicalDevice.cpp",
    "src/dawn/native/PhysicalDevice.h",
    "src/dawn/native/Pipeline.cpp",
    "src/dawn/native/Pipeline.h",
    "src/dawn/native/PipelineCache.cpp",
    "src/dawn/native/PipelineCache.h",
    "src/dawn/native/PipelineLayout.cpp",
    "src/dawn/native/PipelineLayout.h",
    "src/dawn/native/PooledResourceMemoryAllocator.cpp",
    "src/dawn/native/PooledResourceMemoryAllocator.h",
    "src/dawn/native/ProgrammableEncoder.cpp",
    "src/dawn/native/ProgrammableEncoder.h",
    "src/dawn/native/QueryHelper.cpp",
    "src/dawn/native/QueryHelper.h",
    "src/dawn/native/QuerySet.cpp",
    "src/dawn/native/QuerySet.h",
    "src/dawn/native/Queue.cpp",
    "src/dawn/native/Queue.h",
    "src/dawn/native/RefCountedWithExternalCount.cpp",
    "src/dawn/native/RefCountedWithExternalCount.h",
    "src/dawn/native/RenderBundle.cpp",
    "src/dawn/native/RenderBundle.h",
    "src/dawn/native/RenderBundleEncoder.cpp",
    "src/dawn/native/RenderBundleEncoder.h",
    "src/dawn/native/RenderEncoderBase.cpp",
    "src/dawn/native/RenderEncoderBase.h",
    "src/dawn/native/RenderPassEncoder.cpp",
    "src/dawn/native/RenderPassEncoder.h",
    "src/dawn/native/RenderPipeline.cpp",
    "src/dawn/native/RenderPipeline.h",
    "src/dawn/native/ResourceHeap.h",
    "src/dawn/native/ResourceHeapAllocator.h",
    "src/dawn/native/ResourceMemoryAllocation.cpp",
    "src/dawn/native/ResourceMemoryAllocation.h",
    "src/dawn/native/RingBufferAllocator.cpp",
    "src/dawn/native/RingBufferAllocator.h",
    "src/dawn/native/Sampler.cpp",
    "src/dawn/native/Sampler.h",
    "src/dawn/native/ScratchBuffer.cpp",
    "src/dawn/native/ScratchBuffer.h",
    "src/dawn/native/Serializable.h",
    "src/dawn/native/ShaderModule.cpp",
    "src/dawn/native/ShaderModule.h",
    "src/dawn/native/StreamImplTint.cpp",
    "src/dawn/native/Subresource.cpp",
    "src/dawn/native/Subresource.h",
    "src/dawn/native/SubresourceStorage.h",
    "src/dawn/native/Surface.cpp",
    "src/dawn/native/Surface.h",
    "src/dawn/native/SwapChain.cpp",
    "src/dawn/native/SwapChain.h",
    "src/dawn/native/Texture.cpp",
    "src/dawn/native/Texture.h",
    "src/dawn/native/TintUtils.cpp",
    "src/dawn/native/TintUtils.h",
    "src/dawn/native/ToBackend.h",
    "src/dawn/native/Toggles.cpp",
    "src/dawn/native/Toggles.h",
    "src/dawn/native/UsageValidationMode.h",
    "src/dawn/native/VertexFormat.cpp",
    "src/dawn/native/VertexFormat.h",
    "src/dawn/native/VisitableMembers.h",
    "src/dawn/native/dawn_platform.h",
    "src/dawn/native/stream/BlobSource.cpp",
    "src/dawn/native/stream/BlobSource.h",
    "src/dawn/native/stream/ByteVectorSink.cpp",
    "src/dawn/native/stream/ByteVectorSink.h",
    "src/dawn/native/stream/Sink.h",
    "src/dawn/native/stream/Source.h",
    "src/dawn/native/stream/Stream.cpp",
    "src/dawn/native/stream/Stream.h",
    "src/dawn/native/utils/WGPUHelpers.cpp",
    "src/dawn/native/utils/WGPUHelpers.h",
    "src/dawn/native/webgpu_absl_format.cpp",
    "src/dawn/native/webgpu_absl_format.h",
    # From dawn/src/dawn/native/BUILD.gn:utils_gen
    "src/dawn/native/ChainUtils_autogen.cpp",
    "src/dawn/native/ChainUtils_autogen.h",
    "src/dawn/native/ObjectType_autogen.cpp",
    "src/dawn/native/ObjectType_autogen.h",
    "src/dawn/native/ProcTable.cpp",
    "src/dawn/native/ValidationUtils_autogen.cpp",
    "src/dawn/native/ValidationUtils_autogen.h",
    "src/dawn/native/dawn_platform_autogen.h",
    "src/dawn/native/webgpu_StreamImpl_autogen.cpp",
    "src/dawn/native/webgpu_absl_format_autogen.cpp",
    "src/dawn/native/webgpu_absl_format_autogen.h",
    "src/dawn/native/wgpu_structs_autogen.cpp",
    "src/dawn/native/wgpu_structs_autogen.h",
    # From dawn/src/dawn/common/BUILD.gn:common
    "src/dawn/common/Alloc.h",
    "src/dawn/common/Assert.cpp",
    "src/dawn/common/Assert.h",
    "src/dawn/common/BitSetIterator.h",
    "src/dawn/common/Compiler.h",
    "src/dawn/common/ConcurrentCache.h",
    "src/dawn/common/Constants.h",
    "src/dawn/common/CoreFoundationRef.h",
    "src/dawn/common/ContentLessObjectCache.h",
    "src/dawn/common/DynamicLib.cpp",
    "src/dawn/common/DynamicLib.h",
    "src/dawn/common/GPUInfo.cpp",
    "src/dawn/common/GPUInfo.h",
    "src/dawn/common/HashUtils.h",
    "src/dawn/common/IOKitRef.h",
    "src/dawn/common/LinkedList.h",
    "src/dawn/common/Log.cpp",
    "src/dawn/common/Log.h",
    "src/dawn/common/Math.cpp",
    "src/dawn/common/Math.h",
    "src/dawn/common/Mutex.cpp",
    "src/dawn/common/Mutex.h",
    "src/dawn/common/NSRef.h",
    "src/dawn/common/NonCopyable.h",
    "src/dawn/common/Numeric.h",
    "src/dawn/common/PlacementAllocated.h",
    "src/dawn/common/Platform.h",
    "src/dawn/common/Preprocessor.h",
    "src/dawn/common/RefBase.h",
    "src/dawn/common/RefCounted.cpp",
    "src/dawn/common/RefCounted.h",
    "src/dawn/common/Ref.h",
    "src/dawn/common/Result.cpp",
    "src/dawn/common/Result.h",
    "src/dawn/common/SerialMap.h",
    "src/dawn/common/SerialQueue.h",
    "src/dawn/common/SerialStorage.h",
    "src/dawn/common/SlabAllocator.cpp",
    "src/dawn/common/SlabAllocator.h",
    "src/dawn/common/StackContainer.h",
    "src/dawn/common/SystemUtils.cpp",
    "src/dawn/common/SystemUtils.h",
    "src/dawn/common/TypeTraits.h",
    "src/dawn/common/TypedInteger.h",
    "src/dawn/common/UnderlyingType.h",
    "src/dawn/common/ityp_array.h",
    "src/dawn/common/ityp_bitset.h",
    "src/dawn/common/ityp_span.h",
    "src/dawn/common/ityp_stack_vec.h",
    "src/dawn/common/ityp_vector.h",
    "src/dawn/common/vulkan_platform.h",
    "src/dawn/common/xlib_with_undefs.h",
    # Generated files in dawn/src/dawn/common/BUILD.gn
    "src/dawn/common/GPUInfo_autogen.cpp",
    "src/dawn/common/GPUInfo_autogen.h",
    "src/dawn/common/Version_autogen.h",
    # From dawn/src/dawn/platform/BUILD.gn:platform
    "include/dawn/platform/DawnPlatform.h",
    "include/dawn/platform/dawn_platform_export.h",
    "src/dawn/platform/DawnPlatform.cpp",
    "src/dawn/platform/WorkerThread.cpp",
    "src/dawn/platform/WorkerThread.h",
    "src/dawn/platform/tracing/EventTracer.cpp",
    "src/dawn/platform/tracing/EventTracer.h",
    "src/dawn/platform/tracing/TraceEvent.h",
]

DAWN_VULKAN_SRCS = [
    # From dawn/src/dawn/native/BUILD.gn:sources (dawn_enable_vulkan)
    "src/dawn/native/SpirvValidation.cpp",
    "src/dawn/native/SpirvValidation.h",
    "src/dawn/native/vulkan/BackendVk.cpp",
    "src/dawn/native/vulkan/BackendVk.h",
    "src/dawn/native/vulkan/BindGroupLayoutVk.cpp",
    "src/dawn/native/vulkan/BindGroupLayoutVk.h",
    "src/dawn/native/vulkan/BindGroupVk.cpp",
    "src/dawn/native/vulkan/BindGroupVk.h",
    "src/dawn/native/vulkan/BufferVk.cpp",
    "src/dawn/native/vulkan/BufferVk.h",
    "src/dawn/native/vulkan/StreamImplVk.cpp",
    "src/dawn/native/vulkan/CommandBufferVk.cpp",
    "src/dawn/native/vulkan/CommandBufferVk.h",
    "src/dawn/native/vulkan/CommandRecordingContext.h",
    "src/dawn/native/vulkan/ComputePipelineVk.cpp",
    "src/dawn/native/vulkan/ComputePipelineVk.h",
    "src/dawn/native/vulkan/DescriptorSetAllocation.h",
    "src/dawn/native/vulkan/DescriptorSetAllocator.cpp",
    "src/dawn/native/vulkan/DescriptorSetAllocator.h",
    "src/dawn/native/vulkan/DeviceVk.cpp",
    "src/dawn/native/vulkan/DeviceVk.h",
    "src/dawn/native/vulkan/ExternalHandle.h",
    "src/dawn/native/vulkan/FencedDeleter.cpp",
    "src/dawn/native/vulkan/FencedDeleter.h",
    "src/dawn/native/vulkan/Forward.h",
    "src/dawn/native/vulkan/PhysicalDeviceVk.cpp",
    "src/dawn/native/vulkan/PhysicalDeviceVk.h",
    "src/dawn/native/vulkan/PipelineCacheVk.cpp",
    "src/dawn/native/vulkan/PipelineCacheVk.h",
    "src/dawn/native/vulkan/PipelineLayoutVk.cpp",
    "src/dawn/native/vulkan/PipelineLayoutVk.h",
    "src/dawn/native/vulkan/QuerySetVk.cpp",
    "src/dawn/native/vulkan/QuerySetVk.h",
    "src/dawn/native/vulkan/QueueVk.cpp",
    "src/dawn/native/vulkan/QueueVk.h",
    "src/dawn/native/vulkan/RenderPassCache.cpp",
    "src/dawn/native/vulkan/RenderPassCache.h",
    "src/dawn/native/vulkan/RenderPipelineVk.cpp",
    "src/dawn/native/vulkan/RenderPipelineVk.h",
    "src/dawn/native/vulkan/ResourceHeapVk.cpp",
    "src/dawn/native/vulkan/ResourceHeapVk.h",
    "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.cpp",
    "src/dawn/native/vulkan/ResourceMemoryAllocatorVk.h",
    "src/dawn/native/vulkan/SamplerVk.cpp",
    "src/dawn/native/vulkan/SamplerVk.h",
    "src/dawn/native/vulkan/ShaderModuleVk.cpp",
    "src/dawn/native/vulkan/ShaderModuleVk.h",
    "src/dawn/native/vulkan/SwapChainVk.cpp",
    "src/dawn/native/vulkan/SwapChainVk.h",
    "src/dawn/native/vulkan/TextureVk.cpp",
    "src/dawn/native/vulkan/TextureVk.h",
    "src/dawn/native/vulkan/UtilsVulkan.cpp",
    "src/dawn/native/vulkan/UtilsVulkan.h",
    "src/dawn/native/vulkan/VulkanBackend.cpp",
    "src/dawn/native/vulkan/VulkanError.cpp",
    "src/dawn/native/vulkan/VulkanError.h",
    "src/dawn/native/vulkan/VulkanExtensions.cpp",
    "src/dawn/native/vulkan/VulkanExtensions.h",
    "src/dawn/native/vulkan/VulkanFunctions.cpp",
    "src/dawn/native/vulkan/VulkanFunctions.h",
    "src/dawn/native/vulkan/VulkanInfo.cpp",
    "src/dawn/native/vulkan/VulkanInfo.h",
    "src/dawn/native/vulkan/external_memory/MemoryImportParams.h",
    "src/dawn/native/vulkan/external_memory/MemoryService.cpp",
    "src/dawn/native/vulkan/external_memory/MemoryService.h",
    "src/dawn/native/vulkan/external_memory/MemoryServiceImplementation.cpp",
    "src/dawn/native/vulkan/external_memory/MemoryServiceImplementation.h",
    "src/dawn/native/vulkan/external_semaphore/SemaphoreService.cpp",
    "src/dawn/native/vulkan/external_semaphore/SemaphoreService.h",
    "src/dawn/native/vulkan/external_semaphore/SemaphoreServiceImplementation.cpp",
    "src/dawn/native/vulkan/external_semaphore/SemaphoreServiceImplementation.h",
]

DAWN_VULKAN_LINUX_SRCS = [
    # From dawn/src/dawn/native/BUILD.gn:sources (dawn_enable_vulkan && (is_android || is_linux || is_chromeos))
    "src/dawn/native/vulkan/external_semaphore/SemaphoreServiceImplementationFD.cpp",
    "src/dawn/native/vulkan/external_semaphore/SemaphoreServiceImplementationFD.h",
    # From dawn/src/dawn/native/BUILD.gn:sources (dawn_enable_vulkan && (is_linux || is_chromeos))
    "src/dawn/native/vulkan/external_memory/MemoryServiceImplementationDmaBuf.cpp",
    "src/dawn/native/vulkan/external_memory/MemoryServiceImplementationDmaBuf.h",
    "src/dawn/native/vulkan/external_memory/MemoryServiceImplementationOpaqueFD.cpp",
    "src/dawn/native/vulkan/external_memory/MemoryServiceImplementationOpaqueFD.h",
]

DAWN_VULKAN_DEFINES = [
    # From dawn/src/dawn/common/BUILD.gn:internal_config
    "DAWN_ENABLE_BACKEND_VULKAN",
]

cc_library(
    name = "dawn_native",
    srcs = DAWN_SRCS + DAWN_VULKAN_SRCS + DAWN_VULKAN_LINUX_SRCS,
    hdrs = DAWN_HDRS,
    copts = [
        # List this as a copt, so as not to propagate it to dependents
        # Skia has its own vulkan headers and we do not want these to
        # interfere/override those.
        "-Iexternal/vulkan_headers/include",
    ],
    defines = DAWN_VULKAN_DEFINES,
    includes = [
        "include",
        "src",
    ],
    visibility = ["//visibility:private"],  # only used by :dawn
    deps = [
        # Dawn specifically depends on dawn/src/tint/api:api
        ":tint",
        "@abseil_cpp//absl/strings:str_format",
        "@vulkan_headers",
        "@vulkan_tools",
    ],
)

cc_library(
    name = "dawn_cpp",
    srcs = [
        # From dawn/src/dawn/BUILD.gn#cpp
        "include/dawn/webgpu.h",
        "include/dawn/EnumClassBitmasks.h",
        "include/dawn/webgpu_cpp.h",
        "include/dawn/webgpu_cpp_chained_struct.h",
        "src/dawn/webgpu_cpp.cpp",
    ],
    includes = [
        "include",
    ],
    visibility = ["//visibility:private"],  # only used by :dawn
)

cc_library(
    name = "dawn_proc",
    srcs = [
        # From dawn/src/dawn/BUILD.gn#proc
        "include/dawn/webgpu.h",
        "include/dawn/dawn_proc.h",
        "include/dawn/dawn_thread_dispatch_proc.h",
        "include/dawn/dawn_proc_table.h",
        "src/dawn/dawn_proc.c",
        "src/dawn/dawn_thread_dispatch_proc.cpp",
    ],
    includes = [
        "include",
    ],
    visibility = ["//visibility:private"],  # only used by :dawn
)

cc_library(
    name = "dawn",
    visibility = ["//visibility:public"],
    deps = [
        ":dawn_cpp",
        ":dawn_native",
        ":dawn_proc",
    ],
)

TINT_HDRS = [
    "include/tint/tint.h",
]

TINT_SRCS = [
    # Start with the general tint build sources
    # "src/tint/api",
    "src/tint/api/tint.h",
    "src/tint/api/tint.cc",
    # "src/tint/api/common",
    "src/tint/api/common/binding_point.h",
    "src/tint/api/common/common.cc",
    "src/tint/api/common/override_id.h",
    # "src/tint/api/options/BUILD.gn",
    "src/tint/api/options/array_length_from_uniform.h",
    "src/tint/api/options/binding_remapper.h",
    "src/tint/api/options/external_texture.h",
    "src/tint/api/options/options.cc",
    "src/tint/api/options/texture_builtins_from_uniform.h",
    # "src/tint/lang/core/BUILD.gn",
    "src/tint/lang/core/access.cc",
    "src/tint/lang/core/access.h",
    "src/tint/lang/core/address_space.cc",
    "src/tint/lang/core/address_space.h",
    "src/tint/lang/core/attribute.cc",
    "src/tint/lang/core/attribute.h",
    "src/tint/lang/core/binary_op.cc",
    "src/tint/lang/core/binary_op.h",
    "src/tint/lang/core/builtin.cc",
    "src/tint/lang/core/builtin.h",
    "src/tint/lang/core/builtin_value.cc",
    "src/tint/lang/core/builtin_value.h",
    "src/tint/lang/core/diagnostic_rule.cc",
    "src/tint/lang/core/diagnostic_rule.h",
    "src/tint/lang/core/diagnostic_severity.cc",
    "src/tint/lang/core/diagnostic_severity.h",
    "src/tint/lang/core/evaluation_stage.h",
    "src/tint/lang/core/extension.cc",
    "src/tint/lang/core/extension.h",
    "src/tint/lang/core/fluent_types.h",
    "src/tint/lang/core/function.cc",
    "src/tint/lang/core/function.h",
    "src/tint/lang/core/interpolation.h",
    "src/tint/lang/core/interpolation_sampling.cc",
    "src/tint/lang/core/interpolation_sampling.h",
    "src/tint/lang/core/interpolation_type.cc",
    "src/tint/lang/core/interpolation_type.h",
    "src/tint/lang/core/number.cc",
    "src/tint/lang/core/number.h",
    "src/tint/lang/core/parameter_usage.cc",
    "src/tint/lang/core/parameter_usage.h",
    "src/tint/lang/core/texel_format.cc",
    "src/tint/lang/core/texel_format.h",
    "src/tint/lang/core/unary_op.cc",
    "src/tint/lang/core/unary_op.h",
    # "src/tint/lang/core/constant/BUILD.gn",
    "src/tint/lang/core/constant/clone_context.h",
    "src/tint/lang/core/constant/composite.cc",
    "src/tint/lang/core/constant/composite.h",
    "src/tint/lang/core/constant/eval.cc",
    "src/tint/lang/core/constant/eval.h",
    "src/tint/lang/core/constant/manager.cc",
    "src/tint/lang/core/constant/manager.h",
    "src/tint/lang/core/constant/node.cc",
    "src/tint/lang/core/constant/node.h",
    "src/tint/lang/core/constant/scalar.cc",
    "src/tint/lang/core/constant/scalar.h",
    "src/tint/lang/core/constant/splat.cc",
    "src/tint/lang/core/constant/splat.h",
    "src/tint/lang/core/constant/value.cc",
    "src/tint/lang/core/constant/value.h",
    # "src/tint/lang/core/intrinsic/BUILD.gn",
    "src/tint/lang/core/intrinsic/ctor_conv.cc",
    "src/tint/lang/core/intrinsic/ctor_conv.h",
    "src/tint/lang/core/intrinsic/table.cc",
    "src/tint/lang/core/intrinsic/table.h",
    "src/tint/lang/core/intrinsic/table_data.h",
    # "src/tint/lang/core/intrinsic/data/BUILD.gn",
    "src/tint/lang/core/intrinsic/data/data.cc",
    "src/tint/lang/core/intrinsic/data/data.h",
    "src/tint/lang/core/intrinsic/data/type_matchers.h",
    # "src/tint/lang/core/type/BUILD.gn",
    "src/tint/lang/core/type/abstract_float.cc",
    "src/tint/lang/core/type/abstract_float.h",
    "src/tint/lang/core/type/abstract_int.cc",
    "src/tint/lang/core/type/abstract_int.h",
    "src/tint/lang/core/type/abstract_numeric.cc",
    "src/tint/lang/core/type/abstract_numeric.h",
    "src/tint/lang/core/type/array.cc",
    "src/tint/lang/core/type/array.h",
    "src/tint/lang/core/type/array_count.cc",
    "src/tint/lang/core/type/array_count.h",
    "src/tint/lang/core/type/atomic.cc",
    "src/tint/lang/core/type/atomic.h",
    "src/tint/lang/core/type/bool.cc",
    "src/tint/lang/core/type/bool.h",
    "src/tint/lang/core/type/builtin_structs.cc",
    "src/tint/lang/core/type/builtin_structs.h",
    "src/tint/lang/core/type/clone_context.h",
    "src/tint/lang/core/type/depth_multisampled_texture.cc",
    "src/tint/lang/core/type/depth_multisampled_texture.h",
    "src/tint/lang/core/type/depth_texture.cc",
    "src/tint/lang/core/type/depth_texture.h",
    "src/tint/lang/core/type/external_texture.cc",
    "src/tint/lang/core/type/external_texture.h",
    "src/tint/lang/core/type/f16.cc",
    "src/tint/lang/core/type/f16.h",
    "src/tint/lang/core/type/f32.cc",
    "src/tint/lang/core/type/f32.h",
    "src/tint/lang/core/type/i32.cc",
    "src/tint/lang/core/type/i32.h",
    "src/tint/lang/core/type/manager.cc",
    "src/tint/lang/core/type/manager.h",
    "src/tint/lang/core/type/matrix.cc",
    "src/tint/lang/core/type/matrix.h",
    "src/tint/lang/core/type/multisampled_texture.cc",
    "src/tint/lang/core/type/multisampled_texture.h",
    "src/tint/lang/core/type/node.cc",
    "src/tint/lang/core/type/node.h",
    "src/tint/lang/core/type/numeric_scalar.cc",
    "src/tint/lang/core/type/numeric_scalar.h",
    "src/tint/lang/core/type/pointer.cc",
    "src/tint/lang/core/type/pointer.h",
    "src/tint/lang/core/type/reference.cc",
    "src/tint/lang/core/type/reference.h",
    "src/tint/lang/core/type/sampled_texture.cc",
    "src/tint/lang/core/type/sampled_texture.h",
    "src/tint/lang/core/type/sampler.cc",
    "src/tint/lang/core/type/sampler.h",
    "src/tint/lang/core/type/sampler_kind.cc",
    "src/tint/lang/core/type/sampler_kind.h",
    "src/tint/lang/core/type/scalar.cc",
    "src/tint/lang/core/type/scalar.h",
    "src/tint/lang/core/type/storage_texture.cc",
    "src/tint/lang/core/type/storage_texture.h",
    "src/tint/lang/core/type/struct.cc",
    "src/tint/lang/core/type/struct.h",
    "src/tint/lang/core/type/texture.cc",
    "src/tint/lang/core/type/texture.h",
    "src/tint/lang/core/type/texture_dimension.cc",
    "src/tint/lang/core/type/texture_dimension.h",
    "src/tint/lang/core/type/type.cc",
    "src/tint/lang/core/type/type.h",
    "src/tint/lang/core/type/u32.cc",
    "src/tint/lang/core/type/u32.h",
    "src/tint/lang/core/type/unique_node.cc",
    "src/tint/lang/core/type/unique_node.h",
    "src/tint/lang/core/type/vector.cc",
    "src/tint/lang/core/type/vector.h",
    "src/tint/lang/core/type/void.cc",
    "src/tint/lang/core/type/void.h",
    # "src/tint/lang/core/ir/BUILD.gn",
    "src/tint/lang/core/ir/access.cc",
    "src/tint/lang/core/ir/access.h",
    "src/tint/lang/core/ir/binary.cc",
    "src/tint/lang/core/ir/binary.h",
    "src/tint/lang/core/ir/bitcast.cc",
    "src/tint/lang/core/ir/bitcast.h",
    "src/tint/lang/core/ir/block.cc",
    "src/tint/lang/core/ir/block.h",
    "src/tint/lang/core/ir/block_param.cc",
    "src/tint/lang/core/ir/block_param.h",
    "src/tint/lang/core/ir/break_if.cc",
    "src/tint/lang/core/ir/break_if.h",
    "src/tint/lang/core/ir/builder.cc",
    "src/tint/lang/core/ir/builder.h",
    "src/tint/lang/core/ir/builtin_call.cc",
    "src/tint/lang/core/ir/builtin_call.h",
    "src/tint/lang/core/ir/call.cc",
    "src/tint/lang/core/ir/call.h",
    "src/tint/lang/core/ir/constant.cc",
    "src/tint/lang/core/ir/constant.h",
    "src/tint/lang/core/ir/construct.cc",
    "src/tint/lang/core/ir/construct.h",
    "src/tint/lang/core/ir/continue.cc",
    "src/tint/lang/core/ir/continue.h",
    "src/tint/lang/core/ir/control_instruction.cc",
    "src/tint/lang/core/ir/control_instruction.h",
    "src/tint/lang/core/ir/convert.cc",
    "src/tint/lang/core/ir/convert.h",
    "src/tint/lang/core/ir/core_builtin_call.cc",
    "src/tint/lang/core/ir/core_builtin_call.h",
    "src/tint/lang/core/ir/disassembler.cc",
    "src/tint/lang/core/ir/disassembler.h",
    "src/tint/lang/core/ir/discard.cc",
    "src/tint/lang/core/ir/discard.h",
    "src/tint/lang/core/ir/exit.cc",
    "src/tint/lang/core/ir/exit.h",
    "src/tint/lang/core/ir/exit_if.cc",
    "src/tint/lang/core/ir/exit_if.h",
    "src/tint/lang/core/ir/exit_loop.cc",
    "src/tint/lang/core/ir/exit_loop.h",
    "src/tint/lang/core/ir/exit_switch.cc",
    "src/tint/lang/core/ir/exit_switch.h",
    "src/tint/lang/core/ir/function.cc",
    "src/tint/lang/core/ir/function.h",
    "src/tint/lang/core/ir/function_param.cc",
    "src/tint/lang/core/ir/function_param.h",
    "src/tint/lang/core/ir/if.cc",
    "src/tint/lang/core/ir/if.h",
    "src/tint/lang/core/ir/instruction.cc",
    "src/tint/lang/core/ir/instruction.h",
    "src/tint/lang/core/ir/instruction_result.cc",
    "src/tint/lang/core/ir/instruction_result.h",
    "src/tint/lang/core/ir/intrinsic_call.cc",
    "src/tint/lang/core/ir/intrinsic_call.h",
    "src/tint/lang/core/ir/let.cc",
    "src/tint/lang/core/ir/let.h",
    "src/tint/lang/core/ir/load.cc",
    "src/tint/lang/core/ir/load.h",
    "src/tint/lang/core/ir/load_vector_element.cc",
    "src/tint/lang/core/ir/load_vector_element.h",
    "src/tint/lang/core/ir/location.h",
    "src/tint/lang/core/ir/loop.cc",
    "src/tint/lang/core/ir/loop.h",
    "src/tint/lang/core/ir/module.cc",
    "src/tint/lang/core/ir/module.h",
    "src/tint/lang/core/ir/multi_in_block.cc",
    "src/tint/lang/core/ir/multi_in_block.h",
    "src/tint/lang/core/ir/next_iteration.cc",
    "src/tint/lang/core/ir/next_iteration.h",
    "src/tint/lang/core/ir/operand_instruction.cc",
    "src/tint/lang/core/ir/operand_instruction.h",
    "src/tint/lang/core/ir/return.cc",
    "src/tint/lang/core/ir/return.h",
    "src/tint/lang/core/ir/store.cc",
    "src/tint/lang/core/ir/store.h",
    "src/tint/lang/core/ir/store_vector_element.cc",
    "src/tint/lang/core/ir/store_vector_element.h",
    "src/tint/lang/core/ir/switch.cc",
    "src/tint/lang/core/ir/switch.h",
    "src/tint/lang/core/ir/swizzle.cc",
    "src/tint/lang/core/ir/swizzle.h",
    "src/tint/lang/core/ir/terminate_invocation.cc",
    "src/tint/lang/core/ir/terminate_invocation.h",
    "src/tint/lang/core/ir/terminator.cc",
    "src/tint/lang/core/ir/terminator.h",
    "src/tint/lang/core/ir/unary.cc",
    "src/tint/lang/core/ir/unary.h",
    "src/tint/lang/core/ir/unreachable.cc",
    "src/tint/lang/core/ir/unreachable.h",
    "src/tint/lang/core/ir/user_call.cc",
    "src/tint/lang/core/ir/user_call.h",
    "src/tint/lang/core/ir/validator.cc",
    "src/tint/lang/core/ir/validator.h",
    "src/tint/lang/core/ir/value.cc",
    "src/tint/lang/core/ir/value.h",
    "src/tint/lang/core/ir/var.cc",
    "src/tint/lang/core/ir/var.h",
    # "src/tint/lang/core/ir/transform/BUILD.gn",
    "src/tint/lang/core/ir/transform/add_empty_entry_point.cc",
    "src/tint/lang/core/ir/transform/add_empty_entry_point.h",
    "src/tint/lang/core/ir/transform/bgra8unorm_polyfill.cc",
    "src/tint/lang/core/ir/transform/bgra8unorm_polyfill.h",
    "src/tint/lang/core/ir/transform/binary_polyfill.cc",
    "src/tint/lang/core/ir/transform/binary_polyfill.h",
    "src/tint/lang/core/ir/transform/binding_remapper.cc",
    "src/tint/lang/core/ir/transform/binding_remapper.h",
    "src/tint/lang/core/ir/transform/block_decorated_structs.cc",
    "src/tint/lang/core/ir/transform/block_decorated_structs.h",
    "src/tint/lang/core/ir/transform/builtin_polyfill.cc",
    "src/tint/lang/core/ir/transform/builtin_polyfill.h",
    "src/tint/lang/core/ir/transform/demote_to_helper.cc",
    "src/tint/lang/core/ir/transform/demote_to_helper.h",
    "src/tint/lang/core/ir/transform/multiplanar_external_texture.cc",
    "src/tint/lang/core/ir/transform/multiplanar_external_texture.h",
    "src/tint/lang/core/ir/transform/shader_io.cc",
    "src/tint/lang/core/ir/transform/shader_io.h",
    "src/tint/lang/core/ir/transform/std140.cc",
    "src/tint/lang/core/ir/transform/std140.h",
    # "src/tint/lang/hlsl/writer/common/BUILD.gn",
    "src/tint/lang/hlsl/writer/common/options.cc",
    "src/tint/lang/hlsl/writer/common/options.h",
    # "src/tint/lang/spirv/ir/BUILD.gn",
    "src/tint/lang/spirv/ir/builtin_call.cc",
    "src/tint/lang/spirv/ir/builtin_call.h",
    "src/tint/lang/spirv/ir/function.cc",
    "src/tint/lang/spirv/ir/function.h",
    "src/tint/lang/spirv/ir/intrinsic.cc",
    "src/tint/lang/spirv/ir/intrinsic.h",
    "src/tint/lang/spirv/ir/intrinsic_call.cc",
    "src/tint/lang/spirv/ir/intrinsic_call.h",
    # "src/tint/lang/spirv/reader/BUILD.gn",
    "src/tint/lang/spirv/reader/reader.cc",
    "src/tint/lang/spirv/reader/reader.h",
    # "src/tint/lang/spirv/reader/common/BUILD.gn",
    "src/tint/lang/spirv/reader/common/common.cc",
    "src/tint/lang/spirv/reader/common/options.h",
    # "src/tint/lang/spirv/reader/ast_lower/BUILD.gn",
    "src/tint/lang/spirv/reader/ast_lower/atomics.cc",
    "src/tint/lang/spirv/reader/ast_lower/atomics.h",
    "src/tint/lang/spirv/reader/ast_lower/decompose_strided_array.cc",
    "src/tint/lang/spirv/reader/ast_lower/decompose_strided_array.h",
    "src/tint/lang/spirv/reader/ast_lower/decompose_strided_matrix.cc",
    "src/tint/lang/spirv/reader/ast_lower/decompose_strided_matrix.h",
    "src/tint/lang/spirv/reader/ast_lower/fold_trivial_lets.cc",
    "src/tint/lang/spirv/reader/ast_lower/fold_trivial_lets.h",
    # "src/tint/lang/spirv/reader/ast_parser/BUILD.gn",
    "src/tint/lang/spirv/reader/ast_parser/ast_parser.cc",
    "src/tint/lang/spirv/reader/ast_parser/ast_parser.h",
    "src/tint/lang/spirv/reader/ast_parser/attributes.h",
    "src/tint/lang/spirv/reader/ast_parser/construct.cc",
    "src/tint/lang/spirv/reader/ast_parser/construct.h",
    "src/tint/lang/spirv/reader/ast_parser/entry_point_info.cc",
    "src/tint/lang/spirv/reader/ast_parser/entry_point_info.h",
    "src/tint/lang/spirv/reader/ast_parser/enum_converter.cc",
    "src/tint/lang/spirv/reader/ast_parser/enum_converter.h",
    "src/tint/lang/spirv/reader/ast_parser/fail_stream.h",
    "src/tint/lang/spirv/reader/ast_parser/function.cc",
    "src/tint/lang/spirv/reader/ast_parser/function.h",
    "src/tint/lang/spirv/reader/ast_parser/namer.cc",
    "src/tint/lang/spirv/reader/ast_parser/namer.h",
    "src/tint/lang/spirv/reader/ast_parser/parse.cc",
    "src/tint/lang/spirv/reader/ast_parser/parse.h",
    "src/tint/lang/spirv/reader/ast_parser/type.cc",
    "src/tint/lang/spirv/reader/ast_parser/type.h",
    "src/tint/lang/spirv/reader/ast_parser/usage.cc",
    "src/tint/lang/spirv/reader/ast_parser/usage.h",
    # "src/tint/lang/spirv/writer/BUILD.gn",
    "src/tint/lang/spirv/writer/output.h",
    "src/tint/lang/spirv/writer/writer.cc",
    "src/tint/lang/spirv/writer/writer.h",
    # "src/tint/lang/spirv/writer/ast_printer/BUILD.gn",
    "src/tint/lang/spirv/writer/ast_printer/ast_printer.cc",
    "src/tint/lang/spirv/writer/ast_printer/ast_printer.h",
    "src/tint/lang/spirv/writer/ast_printer/builder.cc",
    "src/tint/lang/spirv/writer/ast_printer/builder.h",
    "src/tint/lang/spirv/writer/ast_printer/scalar_constant.h",
    # "src/tint/lang/spirv/writer/ast_raise/BUILD.gn",
    "src/tint/lang/spirv/writer/ast_raise/clamp_frag_depth.cc",
    "src/tint/lang/spirv/writer/ast_raise/clamp_frag_depth.h",
    "src/tint/lang/spirv/writer/ast_raise/for_loop_to_loop.cc",
    "src/tint/lang/spirv/writer/ast_raise/for_loop_to_loop.h",
    "src/tint/lang/spirv/writer/ast_raise/merge_return.cc",
    "src/tint/lang/spirv/writer/ast_raise/merge_return.h",
    "src/tint/lang/spirv/writer/ast_raise/var_for_dynamic_index.cc",
    "src/tint/lang/spirv/writer/ast_raise/var_for_dynamic_index.h",
    "src/tint/lang/spirv/writer/ast_raise/vectorize_matrix_conversions.cc",
    "src/tint/lang/spirv/writer/ast_raise/vectorize_matrix_conversions.h",
    "src/tint/lang/spirv/writer/ast_raise/while_to_loop.cc",
    "src/tint/lang/spirv/writer/ast_raise/while_to_loop.h",
    # "src/tint/lang/spirv/writer/raise/BUILD.gn",
    "src/tint/lang/spirv/writer/raise/builtin_polyfill.cc",
    "src/tint/lang/spirv/writer/raise/builtin_polyfill.h",
    "src/tint/lang/spirv/writer/raise/expand_implicit_splats.cc",
    "src/tint/lang/spirv/writer/raise/expand_implicit_splats.h",
    "src/tint/lang/spirv/writer/raise/handle_matrix_arithmetic.cc",
    "src/tint/lang/spirv/writer/raise/handle_matrix_arithmetic.h",
    "src/tint/lang/spirv/writer/raise/merge_return.cc",
    "src/tint/lang/spirv/writer/raise/merge_return.h",
    "src/tint/lang/spirv/writer/raise/raise.cc",
    "src/tint/lang/spirv/writer/raise/raise.h",
    "src/tint/lang/spirv/writer/raise/shader_io.cc",
    "src/tint/lang/spirv/writer/raise/shader_io.h",
    "src/tint/lang/spirv/writer/raise/var_for_dynamic_index.cc",
    "src/tint/lang/spirv/writer/raise/var_for_dynamic_index.h",
    # "src/tint/lang/spirv/writer/common/BUILD.gn",
    "src/tint/lang/spirv/writer/common/binary_writer.cc",
    "src/tint/lang/spirv/writer/common/binary_writer.h",
    "src/tint/lang/spirv/writer/common/function.cc",
    "src/tint/lang/spirv/writer/common/function.h",
    "src/tint/lang/spirv/writer/common/instruction.cc",
    "src/tint/lang/spirv/writer/common/instruction.h",
    "src/tint/lang/spirv/writer/common/module.cc",
    "src/tint/lang/spirv/writer/common/module.h",
    "src/tint/lang/spirv/writer/common/operand.cc",
    "src/tint/lang/spirv/writer/common/operand.h",
    "src/tint/lang/spirv/writer/common/options.h",
    # "src/tint/lang/spirv/writer/printer/BUILD.gn",
    "src/tint/lang/spirv/writer/printer/printer.cc",
    "src/tint/lang/spirv/writer/printer/printer.h",
    # "src/tint/lang/wgsl/ast/BUILD.gn",
    "src/tint/lang/wgsl/ast/accessor_expression.cc",
    "src/tint/lang/wgsl/ast/accessor_expression.h",
    "src/tint/lang/wgsl/ast/alias.cc",
    "src/tint/lang/wgsl/ast/alias.h",
    "src/tint/lang/wgsl/ast/assignment_statement.cc",
    "src/tint/lang/wgsl/ast/assignment_statement.h",
    "src/tint/lang/wgsl/ast/attribute.cc",
    "src/tint/lang/wgsl/ast/attribute.h",
    "src/tint/lang/wgsl/ast/binary_expression.cc",
    "src/tint/lang/wgsl/ast/binary_expression.h",
    "src/tint/lang/wgsl/ast/binding_attribute.cc",
    "src/tint/lang/wgsl/ast/binding_attribute.h",
    "src/tint/lang/wgsl/ast/bitcast_expression.cc",
    "src/tint/lang/wgsl/ast/bitcast_expression.h",
    "src/tint/lang/wgsl/ast/block_statement.cc",
    "src/tint/lang/wgsl/ast/block_statement.h",
    "src/tint/lang/wgsl/ast/bool_literal_expression.cc",
    "src/tint/lang/wgsl/ast/bool_literal_expression.h",
    "src/tint/lang/wgsl/ast/break_if_statement.cc",
    "src/tint/lang/wgsl/ast/break_if_statement.h",
    "src/tint/lang/wgsl/ast/break_statement.cc",
    "src/tint/lang/wgsl/ast/break_statement.h",
    "src/tint/lang/wgsl/ast/builder.cc",
    "src/tint/lang/wgsl/ast/builder.h",
    "src/tint/lang/wgsl/ast/builtin_attribute.cc",
    "src/tint/lang/wgsl/ast/builtin_attribute.h",
    "src/tint/lang/wgsl/ast/call_expression.cc",
    "src/tint/lang/wgsl/ast/call_expression.h",
    "src/tint/lang/wgsl/ast/call_statement.cc",
    "src/tint/lang/wgsl/ast/call_statement.h",
    "src/tint/lang/wgsl/ast/case_selector.cc",
    "src/tint/lang/wgsl/ast/case_selector.h",
    "src/tint/lang/wgsl/ast/case_statement.cc",
    "src/tint/lang/wgsl/ast/case_statement.h",
    "src/tint/lang/wgsl/ast/clone_context.cc",
    "src/tint/lang/wgsl/ast/clone_context.h",
    "src/tint/lang/wgsl/ast/compound_assignment_statement.cc",
    "src/tint/lang/wgsl/ast/compound_assignment_statement.h",
    "src/tint/lang/wgsl/ast/const.cc",
    "src/tint/lang/wgsl/ast/const.h",
    "src/tint/lang/wgsl/ast/const_assert.cc",
    "src/tint/lang/wgsl/ast/const_assert.h",
    "src/tint/lang/wgsl/ast/continue_statement.cc",
    "src/tint/lang/wgsl/ast/continue_statement.h",
    "src/tint/lang/wgsl/ast/diagnostic_attribute.cc",
    "src/tint/lang/wgsl/ast/diagnostic_attribute.h",
    "src/tint/lang/wgsl/ast/diagnostic_control.cc",
    "src/tint/lang/wgsl/ast/diagnostic_control.h",
    "src/tint/lang/wgsl/ast/diagnostic_directive.cc",
    "src/tint/lang/wgsl/ast/diagnostic_directive.h",
    "src/tint/lang/wgsl/ast/diagnostic_rule_name.cc",
    "src/tint/lang/wgsl/ast/diagnostic_rule_name.h",
    "src/tint/lang/wgsl/ast/disable_validation_attribute.cc",
    "src/tint/lang/wgsl/ast/disable_validation_attribute.h",
    "src/tint/lang/wgsl/ast/discard_statement.cc",
    "src/tint/lang/wgsl/ast/discard_statement.h",
    "src/tint/lang/wgsl/ast/enable.cc",
    "src/tint/lang/wgsl/ast/enable.h",
    "src/tint/lang/wgsl/ast/expression.cc",
    "src/tint/lang/wgsl/ast/expression.h",
    "src/tint/lang/wgsl/ast/extension.cc",
    "src/tint/lang/wgsl/ast/extension.h",
    "src/tint/lang/wgsl/ast/float_literal_expression.cc",
    "src/tint/lang/wgsl/ast/float_literal_expression.h",
    "src/tint/lang/wgsl/ast/for_loop_statement.cc",
    "src/tint/lang/wgsl/ast/for_loop_statement.h",
    "src/tint/lang/wgsl/ast/function.cc",
    "src/tint/lang/wgsl/ast/function.h",
    "src/tint/lang/wgsl/ast/group_attribute.cc",
    "src/tint/lang/wgsl/ast/group_attribute.h",
    "src/tint/lang/wgsl/ast/id_attribute.cc",
    "src/tint/lang/wgsl/ast/id_attribute.h",
    "src/tint/lang/wgsl/ast/identifier.cc",
    "src/tint/lang/wgsl/ast/identifier.h",
    "src/tint/lang/wgsl/ast/identifier_expression.cc",
    "src/tint/lang/wgsl/ast/identifier_expression.h",
    "src/tint/lang/wgsl/ast/if_statement.cc",
    "src/tint/lang/wgsl/ast/if_statement.h",
    "src/tint/lang/wgsl/ast/increment_decrement_statement.cc",
    "src/tint/lang/wgsl/ast/increment_decrement_statement.h",
    "src/tint/lang/wgsl/ast/index_accessor_expression.cc",
    "src/tint/lang/wgsl/ast/index_accessor_expression.h",
    "src/tint/lang/wgsl/ast/index_attribute.cc",
    "src/tint/lang/wgsl/ast/index_attribute.h",
    "src/tint/lang/wgsl/ast/int_literal_expression.cc",
    "src/tint/lang/wgsl/ast/int_literal_expression.h",
    "src/tint/lang/wgsl/ast/internal_attribute.cc",
    "src/tint/lang/wgsl/ast/internal_attribute.h",
    "src/tint/lang/wgsl/ast/interpolate_attribute.cc",
    "src/tint/lang/wgsl/ast/interpolate_attribute.h",
    "src/tint/lang/wgsl/ast/invariant_attribute.cc",
    "src/tint/lang/wgsl/ast/invariant_attribute.h",
    "src/tint/lang/wgsl/ast/let.cc",
    "src/tint/lang/wgsl/ast/let.h",
    "src/tint/lang/wgsl/ast/literal_expression.cc",
    "src/tint/lang/wgsl/ast/literal_expression.h",
    "src/tint/lang/wgsl/ast/location_attribute.cc",
    "src/tint/lang/wgsl/ast/location_attribute.h",
    "src/tint/lang/wgsl/ast/loop_statement.cc",
    "src/tint/lang/wgsl/ast/loop_statement.h",
    "src/tint/lang/wgsl/ast/member_accessor_expression.cc",
    "src/tint/lang/wgsl/ast/member_accessor_expression.h",
    "src/tint/lang/wgsl/ast/module.cc",
    "src/tint/lang/wgsl/ast/module.h",
    "src/tint/lang/wgsl/ast/must_use_attribute.cc",
    "src/tint/lang/wgsl/ast/must_use_attribute.h",
    "src/tint/lang/wgsl/ast/node.cc",
    "src/tint/lang/wgsl/ast/node.h",
    "src/tint/lang/wgsl/ast/node_id.h",
    "src/tint/lang/wgsl/ast/override.cc",
    "src/tint/lang/wgsl/ast/override.h",
    "src/tint/lang/wgsl/ast/parameter.cc",
    "src/tint/lang/wgsl/ast/parameter.h",
    "src/tint/lang/wgsl/ast/phony_expression.cc",
    "src/tint/lang/wgsl/ast/phony_expression.h",
    "src/tint/lang/wgsl/ast/pipeline_stage.cc",
    "src/tint/lang/wgsl/ast/pipeline_stage.h",
    "src/tint/lang/wgsl/ast/return_statement.cc",
    "src/tint/lang/wgsl/ast/return_statement.h",
    "src/tint/lang/wgsl/ast/stage_attribute.cc",
    "src/tint/lang/wgsl/ast/stage_attribute.h",
    "src/tint/lang/wgsl/ast/statement.cc",
    "src/tint/lang/wgsl/ast/statement.h",
    "src/tint/lang/wgsl/ast/stride_attribute.cc",
    "src/tint/lang/wgsl/ast/stride_attribute.h",
    "src/tint/lang/wgsl/ast/struct.cc",
    "src/tint/lang/wgsl/ast/struct.h",
    "src/tint/lang/wgsl/ast/struct_member.cc",
    "src/tint/lang/wgsl/ast/struct_member.h",
    "src/tint/lang/wgsl/ast/struct_member_align_attribute.cc",
    "src/tint/lang/wgsl/ast/struct_member_align_attribute.h",
    "src/tint/lang/wgsl/ast/struct_member_offset_attribute.cc",
    "src/tint/lang/wgsl/ast/struct_member_offset_attribute.h",
    "src/tint/lang/wgsl/ast/struct_member_size_attribute.cc",
    "src/tint/lang/wgsl/ast/struct_member_size_attribute.h",
    "src/tint/lang/wgsl/ast/switch_statement.cc",
    "src/tint/lang/wgsl/ast/switch_statement.h",
    "src/tint/lang/wgsl/ast/templated_identifier.cc",
    "src/tint/lang/wgsl/ast/templated_identifier.h",
    "src/tint/lang/wgsl/ast/traverse_expressions.h",
    "src/tint/lang/wgsl/ast/type.cc",
    "src/tint/lang/wgsl/ast/type.h",
    "src/tint/lang/wgsl/ast/type_decl.cc",
    "src/tint/lang/wgsl/ast/type_decl.h",
    "src/tint/lang/wgsl/ast/unary_op_expression.cc",
    "src/tint/lang/wgsl/ast/unary_op_expression.h",
    "src/tint/lang/wgsl/ast/var.cc",
    "src/tint/lang/wgsl/ast/var.h",
    "src/tint/lang/wgsl/ast/variable.cc",
    "src/tint/lang/wgsl/ast/variable.h",
    "src/tint/lang/wgsl/ast/variable_decl_statement.cc",
    "src/tint/lang/wgsl/ast/variable_decl_statement.h",
    "src/tint/lang/wgsl/ast/while_statement.cc",
    "src/tint/lang/wgsl/ast/while_statement.h",
    "src/tint/lang/wgsl/ast/workgroup_attribute.cc",
    "src/tint/lang/wgsl/ast/workgroup_attribute.h",
    # "src/tint/lang/wgsl/ast/transform/BUILD.gn",
    "src/tint/lang/wgsl/ast/transform/add_block_attribute.cc",
    "src/tint/lang/wgsl/ast/transform/add_block_attribute.h",
    "src/tint/lang/wgsl/ast/transform/add_empty_entry_point.cc",
    "src/tint/lang/wgsl/ast/transform/add_empty_entry_point.h",
    "src/tint/lang/wgsl/ast/transform/array_length_from_uniform.cc",
    "src/tint/lang/wgsl/ast/transform/array_length_from_uniform.h",
    "src/tint/lang/wgsl/ast/transform/binding_remapper.cc",
    "src/tint/lang/wgsl/ast/transform/binding_remapper.h",
    "src/tint/lang/wgsl/ast/transform/builtin_polyfill.cc",
    "src/tint/lang/wgsl/ast/transform/builtin_polyfill.h",
    "src/tint/lang/wgsl/ast/transform/canonicalize_entry_point_io.cc",
    "src/tint/lang/wgsl/ast/transform/canonicalize_entry_point_io.h",
    "src/tint/lang/wgsl/ast/transform/data.cc",
    "src/tint/lang/wgsl/ast/transform/data.h",
    "src/tint/lang/wgsl/ast/transform/demote_to_helper.cc",
    "src/tint/lang/wgsl/ast/transform/demote_to_helper.h",
    "src/tint/lang/wgsl/ast/transform/direct_variable_access.cc",
    "src/tint/lang/wgsl/ast/transform/direct_variable_access.h",
    "src/tint/lang/wgsl/ast/transform/disable_uniformity_analysis.cc",
    "src/tint/lang/wgsl/ast/transform/disable_uniformity_analysis.h",
    "src/tint/lang/wgsl/ast/transform/expand_compound_assignment.cc",
    "src/tint/lang/wgsl/ast/transform/expand_compound_assignment.h",
    "src/tint/lang/wgsl/ast/transform/first_index_offset.cc",
    "src/tint/lang/wgsl/ast/transform/first_index_offset.h",
    "src/tint/lang/wgsl/ast/transform/get_insertion_point.cc",
    "src/tint/lang/wgsl/ast/transform/get_insertion_point.h",
    "src/tint/lang/wgsl/ast/transform/hoist_to_decl_before.cc",
    "src/tint/lang/wgsl/ast/transform/hoist_to_decl_before.h",
    "src/tint/lang/wgsl/ast/transform/manager.cc",
    "src/tint/lang/wgsl/ast/transform/manager.h",
    "src/tint/lang/wgsl/ast/transform/multiplanar_external_texture.cc",
    "src/tint/lang/wgsl/ast/transform/multiplanar_external_texture.h",
    "src/tint/lang/wgsl/ast/transform/preserve_padding.cc",
    "src/tint/lang/wgsl/ast/transform/preserve_padding.h",
    "src/tint/lang/wgsl/ast/transform/promote_initializers_to_let.cc",
    "src/tint/lang/wgsl/ast/transform/promote_initializers_to_let.h",
    "src/tint/lang/wgsl/ast/transform/promote_side_effects_to_decl.cc",
    "src/tint/lang/wgsl/ast/transform/promote_side_effects_to_decl.h",
    "src/tint/lang/wgsl/ast/transform/remove_phonies.cc",
    "src/tint/lang/wgsl/ast/transform/remove_phonies.h",
    "src/tint/lang/wgsl/ast/transform/remove_unreachable_statements.cc",
    "src/tint/lang/wgsl/ast/transform/remove_unreachable_statements.h",
    "src/tint/lang/wgsl/ast/transform/renamer.cc",
    "src/tint/lang/wgsl/ast/transform/renamer.h",
    "src/tint/lang/wgsl/ast/transform/robustness.cc",
    "src/tint/lang/wgsl/ast/transform/robustness.h",
    "src/tint/lang/wgsl/ast/transform/simplify_pointers.cc",
    "src/tint/lang/wgsl/ast/transform/simplify_pointers.h",
    "src/tint/lang/wgsl/ast/transform/single_entry_point.cc",
    "src/tint/lang/wgsl/ast/transform/single_entry_point.h",
    "src/tint/lang/wgsl/ast/transform/std140.cc",
    "src/tint/lang/wgsl/ast/transform/std140.h",
    "src/tint/lang/wgsl/ast/transform/substitute_override.cc",
    "src/tint/lang/wgsl/ast/transform/substitute_override.h",
    "src/tint/lang/wgsl/ast/transform/transform.cc",
    "src/tint/lang/wgsl/ast/transform/transform.h",
    "src/tint/lang/wgsl/ast/transform/unshadow.cc",
    "src/tint/lang/wgsl/ast/transform/unshadow.h",
    "src/tint/lang/wgsl/ast/transform/vectorize_scalar_matrix_initializers.cc",
    "src/tint/lang/wgsl/ast/transform/vectorize_scalar_matrix_initializers.h",
    "src/tint/lang/wgsl/ast/transform/vertex_pulling.cc",
    "src/tint/lang/wgsl/ast/transform/vertex_pulling.h",
    "src/tint/lang/wgsl/ast/transform/zero_init_workgroup_memory.cc",
    "src/tint/lang/wgsl/ast/transform/zero_init_workgroup_memory.h",
    # "src/tint/lang/wgsl/helpers/BUILD.gn",
    "src/tint/lang/wgsl/helpers/append_vector.cc",
    "src/tint/lang/wgsl/helpers/append_vector.h",
    "src/tint/lang/wgsl/helpers/check_supported_extensions.cc",
    "src/tint/lang/wgsl/helpers/check_supported_extensions.h",
    "src/tint/lang/wgsl/helpers/flatten_bindings.cc",
    "src/tint/lang/wgsl/helpers/flatten_bindings.h",
    # "src/tint/lang/wgsl/inspector/BUILD.gn",
    "src/tint/lang/wgsl/inspector/entry_point.cc",
    "src/tint/lang/wgsl/inspector/entry_point.h",
    "src/tint/lang/wgsl/inspector/inspector.cc",
    "src/tint/lang/wgsl/inspector/inspector.h",
    "src/tint/lang/wgsl/inspector/resource_binding.cc",
    "src/tint/lang/wgsl/inspector/resource_binding.h",
    "src/tint/lang/wgsl/inspector/scalar.cc",
    "src/tint/lang/wgsl/inspector/scalar.h",
    # "src/tint/lang/wgsl/program/BUILD.gn",
    "src/tint/lang/wgsl/program/clone_context.cc",
    "src/tint/lang/wgsl/program/clone_context.h",
    "src/tint/lang/wgsl/program/program.cc",
    "src/tint/lang/wgsl/program/program.h",
    "src/tint/lang/wgsl/program/program_builder.cc",
    "src/tint/lang/wgsl/program/program_builder.h",
    # "src/tint/lang/wgsl/reader/BUILD.gn",
    "src/tint/lang/wgsl/reader/reader.cc",
    "src/tint/lang/wgsl/reader/reader.h",
    # "src/tint/lang/wgsl/reader/parser/BUILD.gn",
    "src/tint/lang/wgsl/reader/parser/classify_template_args.cc",
    "src/tint/lang/wgsl/reader/parser/classify_template_args.h",
    "src/tint/lang/wgsl/reader/parser/detail.h",
    "src/tint/lang/wgsl/reader/parser/lexer.cc",
    "src/tint/lang/wgsl/reader/parser/lexer.h",
    "src/tint/lang/wgsl/reader/parser/parser.cc",
    "src/tint/lang/wgsl/reader/parser/parser.h",
    "src/tint/lang/wgsl/reader/parser/token.cc",
    "src/tint/lang/wgsl/reader/parser/token.h",
    # "src/tint/lang/wgsl/reader/program_to_ir/BUILD.gn",
    "src/tint/lang/wgsl/reader/program_to_ir/program_to_ir.cc",
    "src/tint/lang/wgsl/reader/program_to_ir/program_to_ir.h",
    # "src/tint/lang/wgsl/resolver/BUILD.gn",
    "src/tint/lang/wgsl/resolver/dependency_graph.cc",
    "src/tint/lang/wgsl/resolver/dependency_graph.h",
    "src/tint/lang/wgsl/resolver/resolve.cc",
    "src/tint/lang/wgsl/resolver/resolve.h",
    "src/tint/lang/wgsl/resolver/resolver.cc",
    "src/tint/lang/wgsl/resolver/resolver.h",
    "src/tint/lang/wgsl/resolver/sem_helper.cc",
    "src/tint/lang/wgsl/resolver/sem_helper.h",
    "src/tint/lang/wgsl/resolver/uniformity.cc",
    "src/tint/lang/wgsl/resolver/uniformity.h",
    "src/tint/lang/wgsl/resolver/validator.cc",
    "src/tint/lang/wgsl/resolver/validator.h",
    # "src/tint/lang/wgsl/sem/BUILD.gn",
    "src/tint/lang/wgsl/sem/accessor_expression.cc",
    "src/tint/lang/wgsl/sem/accessor_expression.h",
    "src/tint/lang/wgsl/sem/array_count.cc",
    "src/tint/lang/wgsl/sem/array_count.h",
    "src/tint/lang/wgsl/sem/behavior.cc",
    "src/tint/lang/wgsl/sem/behavior.h",
    "src/tint/lang/wgsl/sem/block_statement.cc",
    "src/tint/lang/wgsl/sem/block_statement.h",
    "src/tint/lang/wgsl/sem/break_if_statement.cc",
    "src/tint/lang/wgsl/sem/break_if_statement.h",
    "src/tint/lang/wgsl/sem/builtin.cc",
    "src/tint/lang/wgsl/sem/builtin.h",
    "src/tint/lang/wgsl/sem/builtin_enum_expression.cc",
    "src/tint/lang/wgsl/sem/builtin_enum_expression.h",
    "src/tint/lang/wgsl/sem/call.cc",
    "src/tint/lang/wgsl/sem/call.h",
    "src/tint/lang/wgsl/sem/call_target.cc",
    "src/tint/lang/wgsl/sem/call_target.h",
    "src/tint/lang/wgsl/sem/expression.cc",
    "src/tint/lang/wgsl/sem/expression.h",
    "src/tint/lang/wgsl/sem/for_loop_statement.cc",
    "src/tint/lang/wgsl/sem/for_loop_statement.h",
    "src/tint/lang/wgsl/sem/function.cc",
    "src/tint/lang/wgsl/sem/function.h",
    "src/tint/lang/wgsl/sem/function_expression.cc",
    "src/tint/lang/wgsl/sem/function_expression.h",
    "src/tint/lang/wgsl/sem/if_statement.cc",
    "src/tint/lang/wgsl/sem/if_statement.h",
    "src/tint/lang/wgsl/sem/index_accessor_expression.cc",
    "src/tint/lang/wgsl/sem/index_accessor_expression.h",
    "src/tint/lang/wgsl/sem/info.cc",
    "src/tint/lang/wgsl/sem/info.h",
    "src/tint/lang/wgsl/sem/load.cc",
    "src/tint/lang/wgsl/sem/load.h",
    "src/tint/lang/wgsl/sem/loop_statement.cc",
    "src/tint/lang/wgsl/sem/loop_statement.h",
    "src/tint/lang/wgsl/sem/materialize.cc",
    "src/tint/lang/wgsl/sem/materialize.h",
    "src/tint/lang/wgsl/sem/member_accessor_expression.cc",
    "src/tint/lang/wgsl/sem/member_accessor_expression.h",
    "src/tint/lang/wgsl/sem/module.cc",
    "src/tint/lang/wgsl/sem/module.h",
    "src/tint/lang/wgsl/sem/node.cc",
    "src/tint/lang/wgsl/sem/node.h",
    "src/tint/lang/wgsl/sem/pipeline_stage_set.h",
    "src/tint/lang/wgsl/sem/sampler_texture_pair.h",
    "src/tint/lang/wgsl/sem/statement.cc",
    "src/tint/lang/wgsl/sem/statement.h",
    "src/tint/lang/wgsl/sem/struct.cc",
    "src/tint/lang/wgsl/sem/struct.h",
    "src/tint/lang/wgsl/sem/switch_statement.cc",
    "src/tint/lang/wgsl/sem/switch_statement.h",
    "src/tint/lang/wgsl/sem/type_expression.cc",
    "src/tint/lang/wgsl/sem/type_expression.h",
    "src/tint/lang/wgsl/sem/type_mappings.h",
    "src/tint/lang/wgsl/sem/value_constructor.cc",
    "src/tint/lang/wgsl/sem/value_constructor.h",
    "src/tint/lang/wgsl/sem/value_conversion.cc",
    "src/tint/lang/wgsl/sem/value_conversion.h",
    "src/tint/lang/wgsl/sem/value_expression.cc",
    "src/tint/lang/wgsl/sem/value_expression.h",
    "src/tint/lang/wgsl/sem/variable.cc",
    "src/tint/lang/wgsl/sem/variable.h",
    "src/tint/lang/wgsl/sem/while_statement.cc",
    "src/tint/lang/wgsl/sem/while_statement.h",
    # "src/tint/lang/wgsl/writer/BUILD.gn",
    "src/tint/lang/wgsl/writer/options.cc",
    "src/tint/lang/wgsl/writer/options.h",
    "src/tint/lang/wgsl/writer/output.cc",
    "src/tint/lang/wgsl/writer/output.h",
    "src/tint/lang/wgsl/writer/writer.cc",
    "src/tint/lang/wgsl/writer/writer.h",
    # "src/tint/lang/wgsl/writer/ast_printer/BUILD.gn",
    "src/tint/lang/wgsl/writer/ast_printer/ast_printer.cc",
    "src/tint/lang/wgsl/writer/ast_printer/ast_printer.h",
    # "src/tint/lang/wgsl/writer/syntax_tree_printer/BUILD.gn",
    "src/tint/lang/wgsl/writer/syntax_tree_printer/syntax_tree_printer.cc",
    "src/tint/lang/wgsl/writer/syntax_tree_printer/syntax_tree_printer.h",
    # "src/tint/utils/containers/BUILD.gn",
    "src/tint/utils/containers/bitset.h",
    "src/tint/utils/containers/containers.cc",
    "src/tint/utils/containers/enum_set.h",
    "src/tint/utils/containers/hashmap.h",
    "src/tint/utils/containers/hashmap_base.h",
    "src/tint/utils/containers/hashset.h",
    "src/tint/utils/containers/map.h",
    "src/tint/utils/containers/predicates.h",
    "src/tint/utils/containers/reverse.h",
    "src/tint/utils/containers/scope_stack.h",
    "src/tint/utils/containers/slice.h",
    "src/tint/utils/containers/transform.h",
    "src/tint/utils/containers/unique_allocator.h",
    "src/tint/utils/containers/unique_vector.h",
    "src/tint/utils/containers/vector.h",
    # "src/tint/utils/debug/BUILD.gn",
    "src/tint/utils/debug/debugger.cc",
    "src/tint/utils/debug/debugger.h",
    # "src/tint/utils/diagnostic/BUILD.gn",
    "src/tint/utils/diagnostic/diagnostic.cc",
    "src/tint/utils/diagnostic/diagnostic.h",
    "src/tint/utils/diagnostic/formatter.cc",
    "src/tint/utils/diagnostic/formatter.h",
    "src/tint/utils/diagnostic/printer.cc",
    "src/tint/utils/diagnostic/printer.h",
    "src/tint/utils/diagnostic/source.cc",
    "src/tint/utils/diagnostic/source.h",
    # "src/tint/utils/generator/BUILD.gn",
    "src/tint/utils/generator/text_generator.cc",
    "src/tint/utils/generator/text_generator.h",
    # "src/tint/utils/ice/BUILD.gn",
    "src/tint/utils/ice/ice.cc",
    "src/tint/utils/ice/ice.h",
    # "src/tint/utils/id/BUILD.gn",
    "src/tint/utils/id/generation_id.cc",
    "src/tint/utils/id/generation_id.h",
    # "src/tint/utils/macros/BUILD.gn",
    "src/tint/utils/macros/compiler.h",
    "src/tint/utils/macros/concat.h",
    "src/tint/utils/macros/defer.h",
    "src/tint/utils/macros/foreach.h",
    "src/tint/utils/macros/macros.cc",
    "src/tint/utils/macros/scoped_assignment.h",
    # "src/tint/utils/math/BUILD.gn",
    "src/tint/utils/math/crc32.h",
    "src/tint/utils/math/hash.h",
    "src/tint/utils/math/math.cc",
    "src/tint/utils/math/math.h",
    # "src/tint/utils/memory/BUILD.gn",
    "src/tint/utils/memory/bitcast.h",
    "src/tint/utils/memory/block_allocator.h",
    "src/tint/utils/memory/bump_allocator.h",
    "src/tint/utils/memory/memory.cc",
    # "src/tint/utils/reflection/BUILD.gn",
    "src/tint/utils/reflection/reflection.cc",
    "src/tint/utils/reflection/reflection.h",
    # "src/tint/utils/result/BUILD.gn",
    "src/tint/utils/result/result.cc",
    "src/tint/utils/result/result.h",
    # "src/tint/utils/rtti/BUILD.gn",
    "src/tint/utils/rtti/castable.cc",
    "src/tint/utils/rtti/castable.h",
    "src/tint/utils/rtti/switch.h",
    # "src/tint/utils/strconv/BUILD.gn",
    "src/tint/utils/strconv/float_to_string.cc",
    "src/tint/utils/strconv/float_to_string.h",
    "src/tint/utils/strconv/parse_num.cc",
    "src/tint/utils/strconv/parse_num.h",
    # "src/tint/utils/symbol/BUILD.gn",
    "src/tint/utils/symbol/symbol.cc",
    "src/tint/utils/symbol/symbol.h",
    "src/tint/utils/symbol/symbol_table.cc",
    "src/tint/utils/symbol/symbol_table.h",
    # "src/tint/utils/text/BUILD.gn",
    "src/tint/utils/text/string.cc",
    "src/tint/utils/text/string.h",
    "src/tint/utils/text/string_stream.cc",
    "src/tint/utils/text/string_stream.h",
    "src/tint/utils/text/unicode.cc",
    "src/tint/utils/text/unicode.h",
    # "src/tint/utils/traits/BUILD.gn",
    "src/tint/utils/traits/traits.cc",
    "src/tint/utils/traits/traits.h",
]

cc_library(
    name = "tint",
    srcs = TINT_SRCS,
    hdrs = TINT_HDRS,
    defines = [
        # From dawn/src/tint/BUILD.gn:tint_public_config, using the options
        # set by Skia in //build_overrides/tint.gni
        "TINT_BUILD_SPV_READER=1",
        "TINT_BUILD_SPV_WRITER=1",
        "TINT_BUILD_WGSL_READER=1",
        "TINT_BUILD_WGSL_WRITER=1",
    ],
    includes = [
        "include",
    ],
    visibility = ["//visibility:public"],
    deps = [
        # Tint depends on abseil-cpp:strings for absl/strings/charconv.h
        "@abseil_cpp//absl/strings",
        # Tint specifically depends on spirv-tools/BUILD.gn:spirv_opt
        "@spirv_tools//:spirv_tools_opt",
        # Tint requires "include/spirv/unified1/spirv.hpp11", which is provided
        # by this rule
        "@spirv_headers//:spirv_cpp11_headers",
        # Tint requires "include/spirv/unified1/spirv.h", which is provided by
        # this rule
        "@spirv_headers//:spirv_c_headers",
    ],
)
